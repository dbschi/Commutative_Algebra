\section{Spec}
\newcommand{\spec}{\textrm{Spec }}
\definition{Spec}{
    Let $R$ be a ring. The Spec of $R$ is the set of all prime ideals in $R$, denoted as $\spec (R)$.
}\begin{notation}
    Write $x\in \spec(R)$. This corresponds to prime ideal $p_x\subseteq R$.
\end{notation}
\definition[]{}{
    Let $E \subset R$. Define \[
    V(E) \defeq \{x\in \spec(R): E\subseteq p_x\}.
    \]
}
\proposition[]{
    Let $a$ be the ideal generated by $E$. \[
    V(E) = V(a)=V(r(a)).
    \]
}
\begin{proof}
    The inclusions $\supseteq $ are tautological.

    Now we need if $p\supseteq E$ then $p\supseteq r(a)$. Trivially $p\supseteq a$. Now if $r\in r(a)$, then for some $n$, $r^n\in a \subseteq p$. Since $p$ is prime we must have $r\in p$.
\end{proof}

\definition{Topology on Spec}{
    We define the topology on Spec, such that the closed sets are exactly all the sets $V(a)$.

    This is known as the Zariski Topology.
}
\proposition[topologyspec]{
    This is a well defined topology.
}
We will complete the proof later.

\proposition[intersectionspec]{
\[
\bigcap_{i\in I} V(E_i) = V(\bigcup_{i\in I}E_i).
\]
}
\begin{proof}
    
If $x\in \bigcap_{i\in I} V(E_i) $, then $p_x\supseteq E_i$ for all $i\in I$. Then $p\supseteq \cup_i E_i$.
On the other hand, if $p_x\supseteq \cup E_i$ then $p_x\supseteq E_i$, so $x\in V(E_i)$ for all $i$.
\end{proof}
\proposition[unionspec]{
    \[
    V(ab) = V(a)\cup V(b).
    \]
}
\begin{proof}
    ($\subseteq$)
    Supposed $p\supseteq ab$. We want $p\supseteq a$ or $p\supseteq b$. 

    Suppose not, then pick $r_1\in a-p,r_2\in b-p$, but then $ab \ni r_1r_2\notin p$. 
    
    ($\supseteq$)
    On the other inclusion, if $x\in V(a)$ then $p_x\supseteq ab$. 
\end{proof}


\begin{proof}[Proof of \ref{prop:topologyspec}]
    We need \begin{enumerate}
        \item Empty set and $\spec$ to be closed. This is easy as $\spec R = V(\{0\})$, $\{\}=V(R)$.
        \item Arbitrary intersections as closed.
        \item Finite unions are closed.
    \end{enumerate}

    The other two statements are from proposition \ref{prop:unionspec} and \ref{prop:intersectionspec}.
\end{proof}
\proposition[]{
\[
V(ab) = V(a\cap b).
\]
}
\begin{proof}
    This is because $r(a\cap b) = r(ab)$.
    The inclusion $\supseteq$ is trivial.
    For the other inclusion, if $x^n\in a\cup b$, then $x^{2n}\in ab$.
\end{proof}
\begin{remark}
    This proof breaks down when we have infinite intersections. Therefore we cannot use it.
\end{remark}
\example[]{
    \begin{itemize}
        \item $\spec(K)=\{(0)\}$ for any field $K$.
        \item $\spec(\mathbb{Z})=(0),(2),(3),(5)...$. Since each ideal generated by a prime number is prime, we have $V((p)) = (p)$.
    \end{itemize}
}
\proposition[]{
    $x\in \spec R$ is closed $iff$ $p_x\subseteq R$ is maximal. 
}\begin{proof}
    $\implies$: Suppose not maximal, then there is a maximal ideal $m$ containing it. Then for any $p_x\in V(a)$, we would have $m\in V(a)$.

    $\impliedby$: Consider $V(p_x)=\{x\}$.
\end{proof}
\begin{remark}
    We have if $p_y\supseteq p_x$, then $x\in V(a)\implies y\in V(a)$.
\end{remark}
\corollary[]{
    Let $x\in \spec R$. Then the closure $\bar{x}=\{y:p_y\supseteq p_x\}$. 
}
\proposition[]{
    The only closed subsets of $\spec \mathbb{Z}$ are $V((l))$, some positive integer $l$.
}
\begin{proof}
    Since $\mathbb{Z}$ is a pid, every closed set is of the form $V((l))$.
    If $l=0,1$ then we are done. Else consider the prime factorization of $l$. This means we have the $V((l))=\cup (p_i)$. This is also finite unions of closed points in $\spec$.
\end{proof}

\example[]{
    Let $R=\mathbb{C}[x,y]$.
    Assume that a maximal chain of prime ideals in $R$ has the form \[
    (0)\subset (f) \subset m\subset \mathbb{C}[x,y],
    \]
    where $f$ is irreducible. We can reason through this by the nullstellensatz, i.e. all $m=((x-\alpha),(y-\beta))$.

    I.e. we can think of every closed point in $\spec R$ corresponds to a point in the 2D plane. Now every $f$, we have $f\in m \iff f(\alpha, \beta)=0$, so we can think of $f$ as the curve $f=0$ in the 2D plane (with a fuzzy point corresponding to the curve itself).
}
\definition{Open sets of Zariski topology}{
    Define $D(f)\defeq\{p:f\notin p\}=\spec R \backslash V(f)$.
}
\proposition[]{
    \begin{itemize}
        \item $D(f_i)$
            forms a basis for the topology.
        \item $D(f)\cap D(g)=D(fg)$
        \item $D(f)=\{\}\iff f $ if nilpotent
        \item $D(f)=\spec R\iff f$ is a unit.
        \item $D(f)=D(g)\iff r(f^n)=r(g^n)$.
    \end{itemize}
}
\proposition[]{
    \[D(f)\simeq \spec R_f,\]
    and $\spec R$ is a quasi-compact topological space. I.e. every open cover has a finite subcover
}
\begin{proof}
    Exercise.
\end{proof}